{"version":3,"sources":["webpack:///./static/js/app/src/login/login.js","webpack:///./static/js/app/src/login/login.validate.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,+CAA8C,kCAAkC;AAChF,sBAAqB;AACrB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,0BAAyB;AACzB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb;AACA,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,uEAAsE,UAAU;AAChF;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA,kBAAiB;AACjB;AACA,cAAa;AACb;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL,EAAC;;AAED;AACA,qDAAoD;AACpD;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4CAA2C;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAgF,iEAAiE,+CAA+C,6CAA6C;AAC7O;;AAEA;AACA;AACA;AACA;AACA,E;;;;;;;;AC7mBA;AACA;AACA;AACA;;AAEA;AACA,6BAA4B,KAAK;AACjC;AACA;;AAEA;AACA,mDAAkD,KAAK;AACvD,6BAA4B,KAAK;AACjC;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iFAAgF,EAAE;AAClF;AACA;;AAEA;AACA,oBAAmB,EAAE;AACrB;AACA;;AAEA;AACA,iCAAgC,GAAG;AACnC;AACA;;AAEA;AACA,iCAAgC,GAAG;AACnC;AACA;;AAEA;AACA,iCAAgC,GAAG;AACnC;AACA;;AAEA;AACA,6BAA4B,GAAG;AAC/B;AACA;;AAEA,2B","file":"login/login.js","sourcesContent":["/**\r\n * Created by huwanqi on 15/12/14.\r\n */\r\n\r\n\r\nvar validate = require('loginValidate');\r\nvar AJAXservice = require(\"AJAXservice\");\r\nrequire(\"jquery\");\r\nrequire(\"bootstrap\");\r\nrequire(\"cookie\");\r\n\r\nvar baseUrl = AJAXservice.urls.host;\r\n/*\r\n验证码按钮倒计时用。\r\n */\r\nvar wait=60;\r\nfunction time(o) {\r\n    if (wait == 0) {\r\n        $(o).removeAttr('disabled');\r\n        $(o).html(\"获取验证码\");\r\n        wait = 60;\r\n        if($(o).parents(\".modal\").attr(\"id\") == 'loginRegister'){\r\n            $(o).on(\"click\", registerVCOnClick);\r\n        }else{\r\n            $(o).on(\"click\", forgetVCOnClick);\r\n        }\r\n    } else {\r\n        $(o).attr('disabled', \"disabled\");\r\n        $(o).html(\"重新发送(\" + wait + \")\");\r\n        wait--;\r\n        setTimeout(function() {\r\n            time(o);\r\n        }, 1000);\r\n    }\r\n}\r\n\r\nfunction forgetVCOnClick(){\r\n    var phone = $(\"#loginForgetPwd .phone\").val();\r\n    var result = validate.phoneValidate(phone);\r\n    if(result == true){\r\n        $(\"#loginForgetPwd .errorTips\").hide();\r\n        $(this).unbind(\"click\");\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: baseUrl + '/user/sendVerifyCode',\r\n\r\n            data: {\r\n                phone: phone,\r\n                origin: 1\r\n            },\r\n            success: function(data){\r\n                console.log(data);\r\n            },\r\n            error: function(data){\r\n                console.log(data);\r\n            }\r\n        });\r\n        time(this);\r\n    }else{\r\n        $(\"#loginForgetPwd .errorTips\").html(result);\r\n        $(\"#loginForgetPwd .errorTips\").show();\r\n    }\r\n}\r\n\r\nfunction registerVCOnClick(){\r\n    var phone = $(\"#loginRegister .phone\").val();\r\n    var result = validate.phoneValidate(phone);\r\n    if(result == true){\r\n        $(\"#loginRegister .errorTips\").hide();\r\n        $(this).unbind(\"click\");\r\n        $.ajax({\r\n            type: \"GET\",\r\n            url: baseUrl + '/user/sendVerifyCode',\r\n            data: {\r\n                phone: phone\r\n            },\r\n            success: function(data){\r\n                console.log(data);\r\n                if(data.code == 9){\r\n                    $(\"#loginRegister .errorTips\").html(data.msg);\r\n                    $(\"#loginRegister .errorTips\").show();\r\n                    wait = 0;\r\n                }\r\n            },\r\n            error: function(data){\r\n                console.log(data);\r\n            }\r\n        });\r\n        time(this);\r\n    }else{\r\n        $(\"#loginRegister .errorTips\").html(result);\r\n        $(\"#loginRegister .errorTips\").show();\r\n    }\r\n}\r\n\r\n$(document).ready(function(){\r\n    if (isPostBack == \"False\") {\r\n        GetLastUser();\r\n    }\r\n\r\n    $(\".modal\").modal({\r\n        backdrop: \"static\",\r\n        show: false,\r\n        keyboard: true\r\n    });\r\n    function centerModals(){\r\n        $('.modal').each(function(){\r\n            var $clone = $(this).clone().css('display', 'block').appendTo('body');\r\n            var top = Math.round(($clone.height() - $clone.find('.modal-content').height()) / 2) - 52;\r\n            top = top > 0 ? top : 0;\r\n            $clone.remove();\r\n            $(this).find('.modal-content').css(\"margin-top\", top);\r\n        });\r\n    }\r\n    $('.modal').on('show.bs.modal', centerModals);\r\n    $(window).on('resize', centerModals);\r\n    $(\".btn-cancel\").click(function(){\r\n        $(this).parents(\".modal\").modal(\"hide\");\r\n    });\r\n    /*\r\n    申请注册码和我有注册码切换\r\n     */\r\n    $(\"body\").on(\"click\", \"#loginRegister .regCode .navs .item\", function(){\r\n        $(\"#loginRegister .regCode .navs .item\").removeClass(\"active\");\r\n        $(this).addClass(\"active\");\r\n        var data = $(this).attr(\"data\");\r\n        if(data == 'use'){\r\n            $(\"#loginRegister .apply\").hide();\r\n            $(\"#loginRegister .use\").show();\r\n            $(\"#loginRegister .regCode\").height(183);\r\n            $(\"#loginRegister .confirm\").html('注册');\r\n        }else{\r\n            $(\"#loginRegister .apply\").show();\r\n            $(\"#loginRegister .use\").hide();\r\n            $(\"#loginRegister .regCode\").height(243);\r\n            $(\"#loginRegister .confirm\").html('申请');\r\n        }\r\n    });\r\n\r\n    /*\r\n     忘记密码点击发送验证码\r\n     */\r\n    $(\"#loginForgetPwd .get_code\").on(\"click\", forgetVCOnClick);\r\n\r\n    /*\r\n     忘记密码点击确认\r\n     */\r\n    $(\"#loginForgetPwd .confirm\").on(\"click\", function(){\r\n        var phone = $(\"#loginForgetPwd .phone\").val();\r\n        var verifyCode = $(\"#loginForgetPwd .verifyCode\").val();\r\n        var pwd = $(\"#loginForgetPwd .pwd\").val();\r\n        var pwdConfirm = $(\"#loginForgetPwd .pwdConfirm\").val();\r\n        var result = validate.phoneValidate(phone);\r\n        if(result == true) {\r\n            result = validate.verifyCodeValidate(verifyCode);\r\n        }\r\n        if(result == true) {\r\n            result = validate.passwordValidate(pwd);\r\n        }\r\n        if(result == true) {\r\n            result = validate.passwordConfirmValidate(pwd, pwdConfirm);\r\n        }\r\n        if(result === true){\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: baseUrl + '/user/resetPassword',\r\n                data: {\r\n                    password: pwd,\r\n                    phone: phone,\r\n                    verifyCode: verifyCode\r\n                },\r\n                success: function(data){\r\n                    console.log(data);\r\n                    if(data.code == 1){\r\n                        $(\"#loginForgetPwd .errorTips\").hide();\r\n                        $(\"#loginForgetPwd\").modal('hide');\r\n                        $(\"#resetSuccess\").modal('show');\r\n                        setTimeout(function(){$(\"#resetSuccess\").modal('hide');}, 1000);\r\n                    }else{\r\n                        $(\"#loginForgetPwd .errorTips\").html(data.msg);\r\n                        $(\"#loginForgetPwd .errorTips\").show();\r\n                    }\r\n                },\r\n                error: function(data){\r\n                    console.log(data);\r\n                }\r\n            });\r\n        }else{\r\n            $(\"#loginForgetPwd .errorTips\").html(result);\r\n            $(\"#loginForgetPwd .errorTips\").show();\r\n        }\r\n    });\r\n\r\n    /*\r\n     注册点击发送验证码\r\n     */\r\n    $(\"#loginRegister .get_code\").on(\"click\", registerVCOnClick);\r\n\r\n    /*\r\n    申请注册码或者注册\r\n     */\r\n    $(\"#loginRegister .confirm\").on(\"click\", function(){\r\n        var phone = $(\"#loginRegister .phone\").val();\r\n        var verifyCode = $(\"#loginRegister .verifyCode\").val();\r\n        var loginName = $(\"#loginRegister .loginName\").val();\r\n        var pwd = $(\"#loginRegister .pwd\").val();\r\n        var pwdConfirm = $(\"#loginRegister .pwdConfirm\").val();\r\n        var name, campName, campAddress, registrationCode;\r\n        var result = validate.phoneValidate(phone);\r\n        if(result == true){\r\n            result = validate.verifyCodeValidate(verifyCode);\r\n        }\r\n        if(result == true){\r\n            result = validate.loginNameValidate(loginName);\r\n        }\r\n        if(result == true){\r\n            result = validate.passwordValidate(pwd);\r\n        }\r\n        if(result == true){\r\n            result = validate.passwordConfirmValidate(pwd, pwdConfirm);\r\n        }\r\n        var state = $(this).html();\r\n        if(state == '申请'){\r\n            name = $(\"#loginRegister .name\").val();\r\n            campName = $(\"#loginRegister .campName\").val();\r\n            campAddress = $(\"#loginRegister .address\").val();\r\n            registrationCode = null;\r\n            if(result == true){\r\n                result = validate.nameValidate(name);\r\n            }\r\n            if(result == true){\r\n                result = validate.campNameValidate(campName);\r\n            }\r\n            if(result == true){\r\n                result = validate.campAddressValidate(campAddress);\r\n            }\r\n        }else if(state == '注册'){\r\n            name = $(\"#loginRegister .name2\").val();\r\n            campName = null;\r\n            campAddress = null;\r\n            registrationCode = $(\"#loginRegister .registrationCode\").val();\r\n            if(result == true){\r\n                result = validate.nameValidate(name);\r\n            }\r\n            if(result == true){\r\n                result = validate.registrationCodeValidate(registrationCode);\r\n            }\r\n        }\r\n        if(result == true){\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: baseUrl + '/user/register',\r\n                data: {\r\n                    campAddress: campAddress,\r\n                    campName: campName,\r\n                    name: name,\r\n                    password: pwd,\r\n                    phone: phone,\r\n                    registrationCode: registrationCode,\r\n                    userName: loginName,\r\n                    verifyCode: verifyCode\r\n                },\r\n                success: function(data){\r\n                    if(data.code == 1){\r\n                        if(state == '注册'){\r\n                            $(\"#loginRegister\").modal('hide');\r\n                            $(\"#loginRegSuccess\").modal('show');\r\n                            window.location.href = '/view/category/room.html';\r\n                        }else{\r\n                            $(\"#loginRegister\").modal('hide');\r\n                            $(\"#loginApplySuccess\").modal('show');\r\n                        }\r\n                    }else{\r\n                        $(\"#loginRegister .errorTips\").html(data.msg);\r\n                        $(\"#loginRegister .errorTips\").show();\r\n                    }\r\n                },\r\n                error: function(data){\r\n                    console.log(data);\r\n                }\r\n            });\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }\r\n    });\r\n\r\n    /*\r\n    登录按钮响应\r\n     */\r\n    $(\"#loginSection1 .log button\").on(\"click\", function(){\r\n        var loginName = $(\"#loginSection1 .log .loginName\").val();\r\n        var password = $(\"#loginSection1 .log .password\").val();\r\n        var result = validate.loginNameValidate(loginName);\r\n        if(result == true) {\r\n            result = validate.passwordValidate(password);\r\n        }\r\n        if(result === true){\r\n            $.ajax({\r\n                type: \"GET\",\r\n                url: baseUrl + '/user/login',\r\n                data: {\r\n                    loginName: loginName,\r\n                    password: password\r\n                },\r\n                success: function(data){\r\n                    if(data.code == 1){\r\n                        $(\"#loginLogSuccess\").modal('show');\r\n                        localStorage.setItem(\"campName\", data.data.camps[0].name);\r\n                        localStorage.setItem(\"userName\", data.data.userName);\r\n                        $.cookie(\"jsessionid\", data.data.jsessionid, {path: \"/\"});\r\n                        window.location.href = '/view/category/room.html';\r\n                    }else{\r\n                        $(\"#loginSection1 .log .errorTips\").html(data.msg);\r\n                        $(\"#loginSection1 .log .errorTips\").show();\r\n                        $(\"#loginSection1 .log .text\").css(\"margin-top\", \"30px\");\r\n                    }\r\n                },\r\n                error: function(data){\r\n                    console.log(data);\r\n                }\r\n            });\r\n            $(\"#loginSection1 .log .errorTips\").hide();\r\n            $(\"#loginSection1 .log .text\").css(\"margin-top\", \"44px\");\r\n        }else{\r\n            $(\"#loginSection1 .log .errorTips\").html(result);\r\n            $(\"#loginSection1 .log .errorTips\").show();\r\n            $(\"#loginSection1 .log .text\").css(\"margin-top\", \"30px\");\r\n        }\r\n    });\r\n\r\n    /*\r\n    登录表单验证\r\n     */\r\n    $(\"#loginSection1 .log .loginName\").on(\"change\", function(){\r\n        var loginName = $(this).val();\r\n        var result = validate.loginNameValidate(loginName);\r\n        if(result != true){\r\n            $(\"#loginSection1 .log .errorTips\").html(result);\r\n            $(\"#loginSection1 .log .errorTips\").show();\r\n            $(\"#loginSection1 .log .text\").css(\"margin-top\", \"30px\");\r\n        }else {\r\n            $(\"#loginSection1 .log .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginSection1 .log .password\").on(\"change\", function(){\r\n        var password = $(this).val();\r\n        var result = validate.passwordValidate(password);\r\n        if(result != true){\r\n            $(\"#loginSection1 .log .errorTips\").html(result);\r\n            $(\"#loginSection1 .log .errorTips\").show();\r\n            $(\"#loginSection1 .log .text\").css(\"margin-top\", \"30px\");\r\n        }else {\r\n            $(\"#loginSection1 .log .errorTips\").hide();\r\n        }\r\n    });\r\n\r\n    /*\r\n     忘记密码表单验证\r\n     */\r\n    $(\"#loginForgetPwd .phone\").on(\"change\", function(){\r\n        var phone = $(this).val();\r\n        var result = validate.phoneValidate(phone);\r\n        if(result != true){\r\n            $(\"#loginForgetPwd .errorTips\").html(result);\r\n            $(\"#loginForgetPwd .errorTips\").show();\r\n        }else{\r\n            $(\"#loginForgetPwd .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginForgetPwd .verifyCode\").on(\"change\", function(){\r\n        var verifyCode = $(this).val();\r\n        var result = validate.verifyCodeValidate(verifyCode);\r\n        if(result != true){\r\n            $(\"#loginForgetPwd .errorTips\").html(result);\r\n            $(\"#loginForgetPwd .errorTips\").show();\r\n        }else{\r\n            $(\"#loginForgetPwd .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginForgetPwd .pwd\").on(\"change\", function(){\r\n        var pwd = $(this).val();\r\n        var result = validate.passwordValidate(pwd);\r\n        if(result != true){\r\n            $(\"#loginForgetPwd .errorTips\").html(result);\r\n            $(\"#loginForgetPwd .errorTips\").show();\r\n        }else{\r\n            $(\"#loginForgetPwd .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginForgetPwd .pwdConfirm\").on(\"change\", function(){\r\n        var pwd = $(\"#loginForgetPwd .pwd\").val();\r\n        var pwdConfirm = $(this).val();\r\n        var result = validate.passwordValidate(pwd);\r\n        if(result != true){\r\n            $(\"#loginForgetPwd .errorTips\").html(result);\r\n            $(\"#loginForgetPwd .errorTips\").show();\r\n        }else{\r\n            result = validate.passwordConfirmValidate(pwd, pwdConfirm);\r\n            if(result != true){\r\n                $(\"#loginForgetPwd .errorTips\").html(result);\r\n                $(\"#loginForgetPwd .errorTips\").show();\r\n            }else{\r\n                $(\"#loginForgetPwd .errorTips\").hide();\r\n            }\r\n        }\r\n    });\r\n\r\n    /*\r\n     注册表单验证\r\n     */\r\n    $(\"#loginRegister .phone\").on(\"change\", function(){\r\n        var phone = $(this).val();\r\n        var result = validate.phoneValidate(phone);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .verifyCode\").on(\"change\", function(){\r\n        var verifyCode = $(this).val();\r\n        var result = validate.verifyCodeValidate(verifyCode);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .loginName\").on(\"change\", function(){\r\n        var loginName = $(this).val();\r\n        var result = validate.loginNameValidate(loginName);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n            //验证用户名是否存在\r\n            $.ajax({\r\n                type: 'GET',\r\n                url: baseUrl + '/user/verifyUserName',\r\n                data: {\r\n                    userName: loginName\r\n                },\r\n                success: function(data){\r\n                    if(data.data.exist){\r\n                        $(\"#loginRegister .errorTips\").html('用户名已存在');\r\n                        $(\"#loginRegister .errorTips\").show();\r\n                    }else{\r\n                        $(\"#loginRegister .errorTips\").hide();\r\n                    }\r\n                },\r\n                error: function(data){}\r\n            });\r\n        }\r\n    });\r\n    $(\"#loginRegister .pwd\").on(\"change\", function(){\r\n        var pwd = $(this).val();\r\n        var result = validate.passwordValidate(pwd);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .pwdConfirm\").on(\"change\", function(){\r\n        var pwd = $(\"#loginRegister .pwd\").val();\r\n        var pwdConfirm = $(this).val();\r\n        var result = validate.passwordValidate(pwd);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            result = passwordConfirmValidate(pwd, pwdConfirm);\r\n            if(result != true){\r\n                $(\"#loginRegister .errorTips\").html(result);\r\n                $(\"#loginRegister .errorTips\").show();\r\n            }else{\r\n                $(\"#loginRegister .errorTips\").hide();\r\n            }\r\n        }\r\n    });\r\n    $(\"#loginRegister .name, #loginRegister .name2\").on(\"change\", function(){\r\n        var name = $(this).val();\r\n        var result = validate.nameValidate(name);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .campName\").on(\"change\", function(){\r\n        var campName = $(this).val();\r\n        var result = validate.campNameValidate(campName);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .address\").on(\"change\", function(){\r\n        var address = $(this).val();\r\n        var result = validate.campAddressValidate(address);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n    $(\"#loginRegister .registrationCode\").on(\"change\", function(){\r\n        var registrationCode = $(this).val();\r\n        var result = validate.registrationCodeValidate(registrationCode);\r\n        if(result != true){\r\n            $(\"#loginRegister .errorTips\").html(result);\r\n            $(\"#loginRegister .errorTips\").show();\r\n        }else{\r\n            $(\"#loginRegister .errorTips\").hide();\r\n        }\r\n    });\r\n});\r\n\r\nfunction GetLastUser() {\r\n    var id = \"49BAC005-7D5B-4231-8CEA-16939BEACD67\";//GUID标识符\r\n    var usr = GetCookie(id);\r\n    if (usr != null) {\r\n        $(\"#loginSection1 .loginName\").val(usr);\r\n    } else {\r\n        $(\"#loginSection1 .loginName\").val('');\r\n    }\r\n    GetPwdAndChk();\r\n}\r\n//点击登录时触发客户端事件\r\n\r\nfunction SetPwdAndChk() {\r\n    //取用户名\r\n    var usr = $(\"#loginSection1 .loginName\").val();;\r\n    //将最后一个用户信息写入到Cookie\r\n    SetLastUser(usr);\r\n    //如果记住密码选项被选中\r\n    if (document.getElementById('loginSave').checked == true) {\r\n        //取密码值\r\n        var pwd = $(\"#loginSection1 .password\").val();\r\n        var expdate = new Date();\r\n        expdate.setTime(expdate.getTime() + 14 * (24 * 60 * 60 * 1000));\r\n        //将用户名和密码写入到Cookie\r\n        SetCookie(usr, pwd, expdate);\r\n    } else {\r\n        //如果没有选中记住密码,则立即过期\r\n        ResetCookie();\r\n    }\r\n}\r\n\r\n/*\r\n 记住密码功能用\r\n */\r\nfunction SetLastUser(usr) {\r\n    var id = \"49BAC005-7D5B-4231-8CEA-16939BEACD67\";\r\n    var expdate = new Date();\r\n    //当前时间加上两周的时间\r\n    expdate.setTime(expdate.getTime() + 14 * (24 * 60 * 60 * 1000));\r\n    SetCookie(id, usr, expdate);\r\n}\r\n//用户名失去焦点时调用该方法\r\n\r\nfunction GetPwdAndChk() {\r\n    var usr = $(\"#loginSection1 .loginName\").val();\r\n    var pwd = GetCookie(usr);\r\n    if (pwd != null) {\r\n        document.getElementById('loginSave').checked = true;\r\n        $(\"#loginSection1 .password\").val(pwd);\r\n    } else {\r\n        document.getElementById('loginSave').checked = false;\r\n        $(\"#loginSection1 .password\").val('');\r\n    }\r\n}\r\n//取Cookie的值\r\n\r\nfunction GetCookie(name) {\r\n    var arg = name + \"=\";\r\n    var alen = arg.length;\r\n    var clen = document.cookie.length;\r\n    var i = 0;\r\n    while (i < clen) {\r\n        var j = i + alen;\r\n        if (document.cookie.substring(i, j) == arg) return getCookieVal(j);\r\n        i = document.cookie.indexOf(\" \", i) + 1;\r\n        if (i == 0) break;\r\n    }\r\n    return null;\r\n}\r\nvar isPostBack = \"False\";\r\n\r\nfunction getCookieVal(offset) {\r\n    var endstr = document.cookie.indexOf(\";\", offset);\r\n    if (endstr == -1) endstr = document.cookie.length;\r\n    return unescape(document.cookie.substring(offset, endstr));\r\n}\r\n//写入到Cookie\r\n\r\nfunction SetCookie(name, value, expires) {\r\n    var argv = SetCookie.arguments;\r\n    //本例中length = 3\r\n    var argc = SetCookie.arguments.length;\r\n    var expires = (argc > 2) ? argv[2] : null;\r\n    var path = (argc > 3) ? argv[3] : null;\r\n    var domain = (argc > 4) ? argv[4] : null;\r\n    var secure = (argc > 5) ? argv[5] : false;\r\n    document.cookie = name + \"=\" + escape(value) + ((expires == null) ? \"\" : (\"; expires=\" + expires.toGMTString())) + ((path == null) ? \"\" : (\"; path=\" + path)) + ((domain == null) ? \"\" : (\"; domain=\" + domain)) + ((secure == true) ? \"; secure\" : \"\");\r\n}\r\n\r\nfunction ResetCookie() {\r\n    var usr = $(\"#loginSection1 .loginName\").val();;\r\n    var expdate = new Date();\r\n    SetCookie(usr, null, expdate);\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/js/app/src/login/login.js\n ** module id = 0\n ** module chunks = 3\n **/","/**\r\n * Created by huwanqi on 15/12/19.\r\n */\r\nvar validate = {};\r\n\r\nvalidate.loginNameValidate = function(str){\r\n    var reg = /^[a-zA-Z0-9]{6,15}$/;\r\n    return reg.test(str) || '账户名必须是6到15位的字母或者数字';\r\n};\r\n\r\nvalidate.passwordValidate = function(str){\r\n    //var reg = /^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{6,15}$/;\r\n    var reg = /^[a-zA-Z0-9]{6,15}$/;\r\n    return reg.test(str) || '密码必须是6到15位的数字或字母';\r\n};\r\n\r\nvalidate.passwordConfirmValidate = function(left, right){\r\n    return left === right || '两次输入的密码不一样';\r\n};\r\n\r\nvalidate.phoneValidate = function(str){\r\n    var reg = /^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$/;\r\n    return reg.test(str) || '请填写大陆的11位手机号码';\r\n};\r\n\r\nvalidate.verifyCodeValidate = function(str){\r\n    var reg = /^\\d{4}$/;\r\n    return reg.test(str) || '请填写您收到的4位验证码';\r\n};\r\n\r\nvalidate.nameValidate = function(str){\r\n    var reg = /^[\\u4e00-\\u9fa5]{2,}$/;\r\n    return reg.test(str) || '请填写您的姓名';\r\n};\r\n\r\nvalidate.campNameValidate = function(str){\r\n    var reg = /^[\\u4e00-\\u9fa5]{0,}$/;\r\n    return reg.test(str) || '请填写您的营地名称';\r\n};\r\n\r\nvalidate.campAddressValidate = function(str){\r\n    var reg = /^[\\u4e00-\\u9fa5]{0,}$/;\r\n    return reg.test(str) || '请填写您的营地地址';\r\n};\r\n\r\nvalidate.registrationCodeValidate = function(str){\r\n    var reg = /^[a-zA-Z0-9]{0,}$/;\r\n    return reg.test(str) || '请填写您的营地注册码';\r\n};\r\n\r\nmodule.exports = validate;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./static/js/app/src/login/login.validate.js\n ** module id = 13\n ** module chunks = 3\n **/"],"sourceRoot":""}